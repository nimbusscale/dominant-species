<article class="create-game-page">
  <mat-card>
    <h2>Create a New Game</h2>

    <!-- Current User Field -->
    <mat-form-field>
      <input matInput placeholder="Player 1" [value]="currentUser?.username ?? ''" disabled />
    </mat-form-field>

    <!-- Other Players Fields with Autocomplete and Add Friend Button -->
    <ng-container *ngFor="let control of playerControls.controls; let i = index">
      <mat-form-field>
        <input
          matInput
          placeholder="Player {{ i + 2 }}"
          [formControl]="control"
          (input)="onPlayerInput(i)"
          [matAutocomplete]="auto"
        />
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let player of filteredPlayers[i]" [value]="player">
            {{ player }}
          </mat-option>
        </mat-autocomplete>
        <mat-error *ngIf="errorMessages[i]">{{ errorMessages[i] }}</mat-error>
      </mat-form-field>

      <!-- Add Friend Button -->
      <button
        *ngIf="control.value && !isFriend(control.value)"
        mat-icon-button
        (click)="addFriend(control.value)">
        <mat-icon>person_add</mat-icon>
      </button>
    </ng-container>

    <!-- Create Game Button -->
    <button mat-raised-button color="primary" (click)="createGame()">Create Game</button>
  </mat-card>
</article>
